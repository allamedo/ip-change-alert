version: '3.8'
#docker stack deploy -c docker-compose.yml ip-change-alert --with-registry-auth

services:
    python:
        image: punder/ip-change-alert:docker-compose
        restart: always
        command: python -u main.py
        volumes:
            - ip-change-data:/tmp
        environment:
            IP_CHECK_MINUTES: 30
        secrets:
            - telegram-secrets
        hostname: "{{.Node.Hostname}}"
        logging:
            driver: "gcplogs"
            options:
                gcp-project: "arctic-sound-262110"
        deploy:
            mode: global

secrets:
   telegram-secrets:
     file: .env

volumes:
    ip-change-data: